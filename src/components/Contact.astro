---
import Icon from './Icon.astro';
---

<section id="contacto" class="py-24 lg:py-32 bg-white">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl mx-auto">
      <!-- Section Header -->
      <div class="text-center max-w-3xl mx-auto mb-16">
        <h2 class="text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-gray-900 leading-[1.15] md:leading-[1.1] tracking-tight mb-8">
          Hablemos de tu
          <span class="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
            próximo proyecto
          </span>
        </h2>
        <p class="text-xl md:text-2xl text-gray-600 leading-[1.7] mb-12">
          Estamos listos para convertir tus ideas en realidad digital. 
          Cuéntanos tu proyecto y te ayudamos a llevarlo al siguiente nivel.
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
        
        <!-- Contact Form -->
        <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-8 lg:p-10">
          <div class="mb-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-2">
              Envíanos un mensaje
            </h3>
            <p class="text-gray-600">
              Responderemos en menos de 24 horas
            </p>
          </div>

          <form class="space-y-6" id="contact-form">
            <!-- Name & Company -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="nombre" class="block text-sm font-medium text-gray-700 mb-2">
                  Nombre *
                </label>
                <input 
                  type="text" 
                  id="nombre"
                  name="nombre"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400"
                  placeholder="Tu nombre"
                />
              </div>
              
              <div>
                <label for="empresa" class="block text-sm font-medium text-gray-700 mb-2">
                  Empresa
                </label>
                <input 
                  type="text" 
                  id="empresa"
                  name="empresa"
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400"
                  placeholder="Nombre de tu empresa"
                />
              </div>
            </div>

            <!-- Email & Phone -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                  Email *
                </label>
                <input 
                  type="email" 
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400"
                  placeholder="tu@email.com"
                />
              </div>
              
              <div>
                <label for="telefono" class="block text-sm font-medium text-gray-700 mb-2">
                  Teléfono
                </label>
                <input 
                  type="tel" 
                  id="telefono"
                  name="telefono"
                  class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400"
                  placeholder="+54 (11) 1234-5678"
                />
              </div>
            </div>

            <!-- Project Type -->
            <div>
              <label for="tipo-proyecto" class="block text-sm font-medium text-gray-700 mb-2">
                Tipo de Proyecto *
              </label>
              <select 
                id="tipo-proyecto"
                name="tipo-proyecto"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 bg-white"
              >
                <option value="">Selecciona una opción</option>
                <option value="sitio-web">Sitio Web Corporativo</option>
                <option value="ecommerce">E-commerce / Tienda Online</option>
                <option value="web-app">Aplicación Web</option>
                <option value="app-movil">App Móvil</option>
                <option value="backend-api">Backend / API</option>
                <option value="optimizacion">Optimización de Performance</option>
                <option value="mantenimiento">Soporte y Mantenimiento</option>
                <option value="otro">Otro</option>
              </select>
            </div>

            <!-- Budget -->
            <div>
              <label for="presupuesto" class="block text-sm font-medium text-gray-700 mb-2">
                Presupuesto Aproximado
              </label>
              <select 
                id="presupuesto"
                name="presupuesto"
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 bg-white"
              >
                <option value="">Selecciona un rango</option>
                <option value="5k-15k">$5,000 - $15,000 ARS</option>
                <option value="15k-50k">$15,000 - $50,000 ARS</option>
                <option value="50k-150k">$50,000 - $150,000 ARS</option>
                <option value="150k-500k">$150,000 - $500,000 ARS</option>
                <option value="500k+">$500,000+ ARS</option>
                <option value="no-estoy-seguro">No estoy seguro</option>
              </select>
            </div>

            <!-- Timeline -->
            <div>
              <label for="timeline" class="block text-sm font-medium text-gray-700 mb-2">
                Timeline del Proyecto
              </label>
              <select 
                id="timeline"
                name="timeline"
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 bg-white"
              >
                <option value="">¿Cuándo necesitas el proyecto?</option>
                <option value="inmediato">Lo antes posible</option>
                <option value="1-mes">1 mes</option>
                <option value="2-3-meses">2-3 meses</option>
                <option value="3-6-meses">3-6 meses</option>
                <option value="6-meses+">Más de 6 meses</option>
                <option value="solo-explorando">Solo estoy explorando</option>
              </select>
            </div>

            <!-- Message -->
            <div>
              <label for="mensaje" class="block text-sm font-medium text-gray-700 mb-2">
                Cuéntanos sobre tu proyecto *
              </label>
              <textarea 
                id="mensaje"
                name="mensaje"
                required
                rows="5"
                class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 resize-none"
                placeholder="Describe tu proyecto, objetivos, funcionalidades requeridas, o cualquier detalle que consideres importante..."
              ></textarea>
            </div>

            <!-- Submit Button -->
            <div class="pt-4">
              <button 
                type="submit"
                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold py-4 px-8 rounded-xl hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <span class="flex items-center justify-center">
                  <span id="button-text">Enviar Mensaje</span>
                  <Icon name="Send" class="ml-2 h-5 w-5" id="button-icon" />
                </span>
              </button>
            </div>

            <!-- Status Messages -->
            <div id="form-messages" class="hidden">
              <div id="success-message" class="hidden p-4 bg-green-50 border border-green-200 rounded-xl">
                <div class="flex items-start">
                  <Icon name="CheckCircle" class="h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0" />
                  <div>
                    <h4 class="text-sm font-medium text-green-800">¡Mensaje enviado con éxito!</h4>
                    <p class="text-sm text-green-700 mt-1">Te responderemos dentro de las próximas 24 horas.</p>
                  </div>
                </div>
              </div>

              <div id="error-message" class="hidden p-4 bg-red-50 border border-red-200 rounded-xl">
                <div class="flex items-start">
                  <Icon name="AlertCircle" class="h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0" />
                  <div>
                    <h4 class="text-sm font-medium text-red-800">Error al enviar el mensaje</h4>
                    <p class="text-sm text-red-700 mt-1">Por favor, intenta nuevamente o contáctanos directamente.</p>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- Contact Info -->
        <div class="space-y-8">
          <!-- Contact Cards -->
          <div class="grid grid-cols-1 gap-6">
            
            <!-- Email Card -->
            <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200">
              <div class="flex items-center mb-4">
                <div class="bg-blue-500 rounded-xl p-3">
                  <Icon name="Mail" class="h-6 w-6 text-white" />
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold text-gray-900">Email</h3>
                  <p class="text-blue-600">hola@tecnodespegue.com</p>
                </div>
              </div>
              <p class="text-gray-600 text-sm">
                Para consultas generales y nuevos proyectos
              </p>
            </div>

            <!-- WhatsApp Card -->
            <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200">
              <div class="flex items-center mb-4">
                <div class="bg-green-500 rounded-xl p-3">
                  <Icon name="MessageCircle" class="h-6 w-6 text-white" />
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold text-gray-900">WhatsApp</h3>
                  <p class="text-green-600">+54 9 2302 12-3456</p>
                </div>
              </div>
              <p class="text-gray-600 text-sm">
                Para consultas rápidas y soporte inmediato
              </p>
            </div>

            <!-- Location Card -->
            <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border border-purple-200">
              <div class="flex items-center mb-4">
                <div class="bg-purple-500 rounded-xl p-3">
                  <Icon name="MapPin" class="h-6 w-6 text-white" />
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold text-gray-900">Ubicación</h3>
                  <p class="text-purple-600">Eduardo Castex, La Pampa</p>
                </div>
              </div>
              <p class="text-gray-600 text-sm">
                Trabajamos remoto con clientes de toda Argentina
              </p>
            </div>

          </div>

          <!-- Quick Response Promise -->
          <div class="bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl p-8 text-white">
            <div class="flex items-center mb-4">
              <Icon name="Clock" class="h-8 w-8 text-yellow-400 mr-3" />
              <h3 class="text-xl font-bold">Respuesta Rápida Garantizada</h3>
            </div>
            <p class="text-gray-300 mb-6">
              Nos comprometemos a responder todas las consultas en menos de 24 horas, 
              incluso los fines de semana para proyectos urgentes.
            </p>
            <div class="grid grid-cols-2 gap-4 text-center">
              <div>
                <div class="text-2xl font-bold text-yellow-400">&lt; 24h</div>
                <div class="text-sm text-gray-400">Respuesta inicial</div>
              </div>
              <div>
                <div class="text-2xl font-bold text-yellow-400">&lt; 48h</div>
                <div class="text-sm text-gray-400">Propuesta detallada</div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Contact form handling
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form') as HTMLFormElement | null;
    const submitButton = form?.querySelector('button[type="submit"]') as HTMLButtonElement | null;
    const buttonText = document.getElementById('button-text') as HTMLElement | null;
    const buttonIcon = document.getElementById('button-icon') as HTMLElement | null;
    const formMessages = document.getElementById('form-messages') as HTMLElement | null;
    const successMessage = document.getElementById('success-message') as HTMLElement | null;
    const errorMessage = document.getElementById('error-message') as HTMLElement | null;

    if (!form) return;

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Show loading state
      if (submitButton && buttonText && buttonIcon) {
        submitButton.disabled = true;
        buttonText.textContent = 'Enviando...';
        // Show loading spinner by replacing the icon
        buttonIcon.innerHTML = '<svg class="animate-spin h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/><path d="M9 12l2 2 4-4"/></svg>';
      }

      // Hide previous messages
      if (formMessages && successMessage && errorMessage) {
        formMessages.classList.add('hidden');
        successMessage.classList.add('hidden');
        errorMessage.classList.add('hidden');
      }

      try {
        // Get form data
        const formData = new FormData(form as HTMLFormElement);
        const data = Object.fromEntries(formData);

        // Simulate form submission (replace with actual endpoint)
        await new Promise(resolve => setTimeout(resolve, 1500));

        // For now, we'll simulate a successful submission
        // In production, you would send this to your backend
        console.log('Form data:', data);

        // Show success message
        if (formMessages && successMessage) {
          formMessages.classList.remove('hidden');
          successMessage.classList.remove('hidden');
        }

        // Reset form
        (form as HTMLFormElement).reset();

      } catch (error) {
        console.error('Form submission error:', error);
        
        // Show error message
        if (formMessages && errorMessage) {
          formMessages.classList.remove('hidden');
          errorMessage.classList.remove('hidden');
        }
      } finally {
        // Reset button state
        if (submitButton && buttonText && buttonIcon) {
          submitButton.disabled = false;
          buttonText.textContent = 'Enviar Mensaje';
          // Restore original send icon
          buttonIcon.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 7l10 10-5 1z"/><path d="m22 2-7 20-4-9-9-4 20-7z"/></svg>';
          buttonIcon.classList.remove('animate-spin');
        }
      }
    });
  });
</script>

<style>
  /* Form field focus animations */
  input:focus, 
  select:focus, 
  textarea:focus {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.15);
  }

  /* Custom select arrow */
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 16px;
    appearance: none;
  }

  /* Loading spinner animation */
  .animate-spin {
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
</style>